<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      >
    <h:body>	
    	<ui:composition template="WEB-INF/template/pageTemplate.xhtml">
    		<ui:define name="content">
				<div class="pages-wrapper">
					<h:outputText><h2>Shopping Cart</h2></h:outputText>
					<h:outputText rendered="#{empty cartBean.productMap}">
						<h3>The shopping cart is empty!</h3>
					</h:outputText>
					<c:forEach rendered="#{not empty cartBean.cartProductsList}" var="product" items="#{cartBean.cartProductsList}">
						<ul class="product">
							<li>
								<h:graphicImage rendered="#{not empty product.key.image_url}" value="#{product.key.image_url}" height="120" width="120" alt="#{product.key.name}"></h:graphicImage>
    							<h:graphicImage rendered="#{empty product.key.image_url}" value="img/product/no-image-available.png" height="120" width="120" alt="#{product.key.name}"></h:graphicImage>									
    							<p class="name">#{product.key.name}</p>
    							<p class="price"><b>Price: $#{product.key.price}</b></p>
    							<p class="quantity">Quantity: <h:form><h:commandButton value="+" action="#{cartBean.increaseQuantity(product.key)}"></h:commandButton>#{product.value}<h:commandButton value="-" action="#{cartBean.decreaseQuantity(product.key)}"></h:commandButton></h:form></p>
							</li>
						</ul>
					</c:forEach>
					<h:form><h:commandButton rendered="#{not empty usersBean.userList}" value="submit" action="#{cartBean.submit}"></h:commandButton></h:form>
    			</div>
			</ui:define>
    	</ui:composition>   	
    </h:body>

</html>